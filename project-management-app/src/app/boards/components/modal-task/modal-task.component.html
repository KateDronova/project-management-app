<div class="overlay">
  <div class="modal" role="dialog" aria-labelledby="modalTitle"
    ngClass="initial" [class.smoothAppear]="loaded">
    <h2 *ngIf="!editingTask" id="modalTitle">{{ "newTask" | translate }}</h2>
    <h2 *ngIf="editingTask" id="modalTitle">{{ "editTask" | translate }}</h2>
    <button class="close" aria-label="'close' | translate" (click)="removeModalWindow()">&#10006;</button>
    <form #taskForm="ngForm" novalidate>

      <fieldset *ngIf="!editingTask">
        <label for="background">{{ "background" | translate }}</label>
        <div class="wrapper flex">
          <div *ngFor="let item of backgrounds2">
            <label for="{{ item.id }}">
              <img class="small" (click)="onChooseBack(item.value)"
                [class.selected]="item.value === selectedBack"
                src="{{ item.src }}" alt="{{ item.alt | translate }}">
              <input id="{{ item.id }}" type="radio" [checked]="true"
                [(ngModel)]="backgroundName" name="backgroundName" value="{{ item.value }}">
              <span>&#10004;</span>
            </label>
          </div>
        </div>
        <label for="taskTitle">{{ "title" | translate }}</label>
        <textarea rows="3" id="taskTitle" type="text" [(ngModel)]="taskName"
        name="taskName" required #title="ngModel" required></textarea>
        <div translate class="text-danger">
          <div *ngIf="title.invalid && (title.dirty || title.touched)">
            <span *ngIf="title?.errors?.['required']">
              {{ "requiredErrorMessage" | translate }}
            </span>
          </div>
        </div>
        <label for="description">{{ "description" | translate }}</label>
        <textarea rows="5" id="description" type="text" [(ngModel)]="descriptionName"
          name="descriptionName"></textarea>
        <input type="hidden" id="complete" [value]="taskComplete" name="taskComplete"
          [(ngModel)]="taskForm.taskComplete" #taskComplete="ngModel">
      </fieldset>


      <fieldset *ngIf="editingTask">
        <label for="taskTitle">{{ "title" | translate }}</label>
        <textarea rows="3" id="taskTitle" type="text" [(ngModel)]="currentTask.taskTitle"
        name="taskTitle" required #taskTitle="ngModel" required [value]="currentTask.taskTitle"
        (ngModelChange)="trackChanges('taskTitle', $event)"></textarea>
        <div translate class="text-danger">
          <div *ngIf="taskTitle.invalid && (taskTitle.dirty || taskTitle.touched)">
            <span *ngIf="taskTitle?.errors?.['required']">
              {{ "requiredErrorMessage" | translate }}
            </span>
          </div>
        </div>
        <label for="description">{{ "description" | translate }}</label>
        <textarea rows="5" id="description" type="text" [(ngModel)]="currentTask.taskDescription"
          name="descriptionName" #taskDescription="ngModel" [value]="currentTask.taskDescription"
          (ngModelChange)="trackChanges('description', $event)"></textarea>
        <input type="hidden" id="complete" [value]="taskComplete" name="taskComplete"
          [(ngModel)]="taskForm.taskComplete" #complete="ngModel">
      </fieldset>

      <div class="submButtons">
        <button type="button" class="cancel"(click)="removeModalWindow()">
          {{ "cancel" | translate }}</button>
        <button *ngIf="!editingTask" (click)="onAddTask()" type="submit"
          [disabled]="!taskForm.valid">{{ "continue" | translate }}</button>
        <button *ngIf="editingTask" (click)="onEditTask(id)" type="submit"
          [disabled]="!taskForm.valid">{{ "continue" | translate }}</button>
      </div>
    </form>
  </div>
</div>
